<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Workshop R &amp; RStudio</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.23/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet" />
    <script src="libs/panelset-0.2.6/panelset.js"></script>
    <link rel="stylesheet" href="extra.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: title-slide, center, middle

&lt;link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous"&gt;




&lt;style&gt;

.center2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}

.rcorners1 {
  margin: auto;
  border-radius: 25px;
  background: #ada500;
  padding: 10px;
#  width: 50%;
}
&lt;/style&gt;

&lt;style type="text/css"&gt;
.right-column{
  padding-top: 0;
}

.remark-code, .remark-inline-code { font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;
                                    font-size: 90%;
                                  }

&lt;/style&gt;


&lt;div class="my-logo-left"&gt; &lt;img src="img/UA-eng-hor-1-RGB.jpg" width="110%"/&gt; &lt;/div&gt;
&lt;div class="my-logo-right"&gt; &lt;img src="img/ICO-logo.png" width="90%"/&gt; &lt;/div&gt;


# ICO Workshop R &amp; RStudio
.font160[
.SW-greenD[Part 4]
]
.font120[
.SW-greenD[*Powerful visualisations with*] .UA-red[*`ggplot2`*]
]
Sven De Maeyer &amp; Tine van Daal

.font80[
.UA-red[
2nd - 4th July, 2024
]
]

---
class: inverse-green, left

# Overview

.center2[
1. Simple plots in R --- ([click here](#part1))
2. Grammar of graphics --- ([click here](#part2))
3. How `ggplot2` works (in a nutshell) --- ([click here](#part3))
4. Visualising a categorical variable --- ([click here](#part4))
5. Visualising a quantitative variable --- ([click here](#part5))
6. Visualising more than one variable --- ([click here](#part6))
7. More about visualisation? --- ([click here](#part7))
]

---
class: inverse-green, center, middle
name: part1

# 1. Simple plots in R

---

## Plots in .UA-red[`base`] 

<style>.panelset{--panel-tab-active-foreground: #AAAA17;--panel-tab-hover-foreground: #d22;--panel-tab-font-family: Roboto;}</style>

.panelset[
.panel[.panel-name[.SW-greenD[`plot()`]]
.SW_greenD[The generic function .UA-red[`plot()`] "knows" what to do (plot) with the input it receives.]
.pull-left[

```r
# one quantitatieve variable
plot(Friends$fluency)
```

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-2-1.png" width="252" style="display: block; margin: auto;" /&gt;
]
.pull-right[

```r
# one qualitative variables
plot(table(Friends$condition))
```

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-3-1.png" width="252" style="display: block; margin: auto;" /&gt;
]
]
.panel[.panel-name[`boxplot()`]

```r
boxplot(
  Friends$fluency,
  main = "Boxplot of the variable 'fluency'", 
  col = "steelblue"
  ) 
```

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-4-1.png" width="360" style="display: block; margin: auto;" /&gt;
]
.panel[.panel-name[`hist()`]

```r
hist(
  Friends$fluency,
  main = "Histogram of the variable 'fluency'",
  freq = FALSE,
  ylim = c(0, .08)
  ) 
```

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-5-1.png" width="288" style="display: block; margin: auto;" /&gt;
]
]

---
class: inverse-green, center, middle
name: part2

# 2. Grammar of Graphics

---

## A more theoretical approach to visualisation

.left-column[
&lt;img src="img/Grammar_of_Graphics_cover.jpeg" width="80%" height="80%" /&gt;
]

.right-column[
- Theoretical 'breakdown' of a visualisation into components (called layers)

- One system to create different visualisations

- At the heart of several modern graphical applications:
  - ggplot2
  - Tableau (Polaris)
  - Vega-Lite
]
&lt;br&gt;
.footnote[
_Slide taken from slide show by [Thomas Lin Pedersen](https://github.com/thomasp85/ggplot2_workshop/blob/master/presentation.pdf)_]


---

## Key idea behind the Grammar of Graphics

.pull-left[
.font140[**Layers** of a visualisation:]  
  .data-theme[.bold[data]]  
  .aes-theme[.bold[aesthetics]]  
  .geom-theme[.bold[geometries]]  
  .facet-theme[.bold[facets]]  
  .stat-theme[.bold[statistics]]  
  .coord-theme[.bold[coordinates]]  
  .theme-theme[.bold[themes]]  
]

.pull-right[
![](https://miro.medium.com/max/1400/1*w1RnmuE7VRK9aCAbtW9KAQ.gif)
]
&lt;br&gt;  
&lt;br&gt;  
&lt;br&gt;  
.footnote[
_Animation by [Thomas de Beus](https://medium.com/tdebeus/think-about-the-grammar-of-graphics-when-improving-your-graphs-18e3744d8d18)_]

---

## Grammar of Graphics is a bit like cake 
.pull-left[
&lt;br&gt;   
&lt;br&gt;    
Start by setting up the *foundation* with **`ggplot()`**  

Specify *ingredients* (variables) with **`aes()`** and a *flavour* with  **`scales`** 

Create *layers* to plot with **`geoms`**  

*Style* the cake with **`theme`**  
]

.pull-right[
&lt;img src="img/like_cake.png" width="70%" height="70%" /&gt;
]
.footnote[
_Slide by [Tanya Shapiro](https://twitter.com/tanya_shapiro/status/1576935152575340544?s=20&amp;t=IDPBrEMzKw8NNxA9TW2F4A)_]

---
&lt;div class="my-logo-right"&gt; &lt;img src="img/layers of ggplot.png" width="60%"/&gt; &lt;/div&gt;

## Grammar of Graphics: .data-theme[data]

- Data is not only raw data, but can also be the results from an analysis
  
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; group &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; gender &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mean_age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SD_age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CI_lower &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CI_upper &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; BE Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60.56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; BE Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66.87 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; BE Other &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Other &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 52.07 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NL Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.48 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60.52 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NL Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.56 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 63.44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NL Other &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Other &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.11 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;br&gt;  

- Data has to be 'tidy'

---
&lt;div class="my-logo-right"&gt; &lt;img src="img/layers of ggplot.png" width="60%"/&gt; &lt;/div&gt;

## Grammar of Graphics: .aes-theme[aesthetics]

.pull-left[
- Describe how variables in data are *mapped* to visual properties. For example: 
  - variables mapped on x- and y-axis
  - variable that defines color or size of points
  - ...
  
- Change appearances of aesthetics using `scales`  
]
.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-9-1.png" width="720" style="display: block; margin: auto;" /&gt;
]

---
&lt;div class="my-logo-right"&gt; &lt;img src="img/layers of ggplot.png" width="60%"/&gt; &lt;/div&gt;

## Grammar of Graphics: .geom-theme[geometries]

.pull-left[
- Geometrical shapes at the heart of visualisation. For example:
  - boxplot
  - line
  - ...
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-10-1.png" width="720" style="display: block; margin: auto;" /&gt;
]
---
&lt;div class="my-logo-right"&gt; &lt;img src="img/layers of ggplot.png" width="60%"/&gt; &lt;/div&gt;

## Grammar of Graphics: .facet-theme[facets]

.pull-left[
- Also called 'small multiples'  

- Define how much panels are shown and how they are arranged
]
.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-11-1.png" width="720" style="display: block; margin: auto;" /&gt;

]

---
&lt;div class="my-logo-right"&gt; &lt;img src="img/layers of ggplot.png" width="60%"/&gt; &lt;/div&gt;

## Grammar of Graphics: .stat-theme[statistics]

.pull-left[
- Data might be `tidy`, but still in need of some statistical calculations. For example: 
  - Calculate descriptive statistics to create a boxplot
  - Estimate a linear (or other) model to draw a regression line in a scatter plot

- Often implicit done by `ggplot2`
]
.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-12-1.png" width="720" style="display: block; margin: auto;" /&gt;
]

---
class: inverse-green, center, middle
name: part3

# 3. How `ggplot2` works (in a nutshell)

---
&lt;div class="my-logo-right"&gt; &lt;img src="img/palmerpenguins_hex.png" width="80%"/&gt; &lt;/div&gt;

## Time to get the penguins in...

Nice data set that can be used within R 
.font60[(Source: https://allisonhorst.github.io/palmerpenguins/articles/intro.html)]


```r
install.packages("palmerpenguins")
library(palmerpenguins)
data("penguins")
```

&lt;img src="img/lter_penguins.png" width="50%" height="50%" /&gt;

&lt;p align="right"&gt;.footnotesize[.SW-greenD[*Artwork by @allison_horst*]] &lt;/p&gt;

---
&lt;div class="my-logo-right"&gt; &lt;img src="img/palmerpenguins_hex.png" width="80%"/&gt; &lt;/div&gt;

## Time to get the penguins in...

&lt;table&gt;
&lt;caption&gt;Table 1. Random sample of 10 observations from the Palmer Pinguins dataset&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; species &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; island &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bill_length_mm &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bill_depth_mm &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; flipper_length_mm &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; body_mass_g &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Torgersen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 190 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3600 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Torgersen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3700 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NA &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Chinstrap &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Dream &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 181 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3600 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 186 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3500 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Torgersen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 191 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3700 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 183 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3075 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2009 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Chinstrap &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Dream &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 190 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3575 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Dream &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 44.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 196 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4400 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 195 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3350 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gentoo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4750 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## The basics of .UA-red[`ggplot2`]: *data &amp; aesthetics*

.pull-left[

```r
Plot &lt;- ggplot(

  ## Step 1: data
  data = penguins,
  
  ## Step 2: specify aesthetics (mapping)
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
)

Plot
```
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-17-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## The basics of .UA-red[`ggplot2`]: *geometry*

.pull-left[

```r
Plot &lt;- ggplot(

  ## Step 1: data
  data = penguins,
  
  ## Step 2: specify aesthetics (mapping)
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
) +
  ## Step 3: add geometry
  geom_point()


Plot
```
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-19-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

Not every component of the *Grammar of Graphics* needs to be defined. The other components have *default* values that are automatically applied.

---

## The basics of .UA-red[`ggplot2`]: *facets*

.pull-left[

```r
Plot &lt;- ggplot(

  ## Step 1: data
  data = penguins,
  
  ## Step 2: specify aesthetics (mapping)
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
) +
  ## Step 3: add geometry
  geom_point() +
  
  ## Step 4: define facets
  facet_wrap(~species)


Plot
```
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-21-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## The basics of .UA-red[`ggplot2`]: *theme*

.pull-left[

```r
Plot &lt;- ggplot(

  ## Step 1: data
  data = penguins,
  
  ## Step 2: specify aesthetics (mapping)
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
) +
  ## Step 3: add geometry
  geom_point() +
  
  ## Step 4: define facets 
  facet_wrap(~species) +
  
  ## Step 5: set theme
  theme_minimal()


Plot
```
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-23-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Building a visualisation by adding layers ...

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-24-1.png" width="1152" style="display: block; margin: auto;" /&gt;

---

## Several .UA-red[`geom_*`] options...

&lt;img src="img/ggplot2_cheatsheet.jpg" width="60%" height="60%" style="display: block; margin: auto;" /&gt;

.center[The *cheatsheet*:
https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf]

---
class: inverse-green, center, middle
name: part4

# 4. Visualising a categorical variable

.white[*"The bar is open... Let's have a lollipop?" *]

---

## Visualising a categorical variable?

.left-column[
There are many ways to visualise a categorical variable...   

Can you think of some?]

--
.right-column[
&lt;img src="img/data_to_viz.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;
&lt;br&gt;   
&lt;br&gt;  
.center[.font100[
*Have a look at [data to viz.com](https://www.data-to-viz.com)*
]
]
]

---

## Creating a barplot with .UA-red[`geom_bar()`] or .UA-red[`geom_col()`] 

.pull-left[
**`geom_bar()`**
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-27-1.png" width="216" style="display: block; margin: auto auto auto 0;" /&gt;
]
.pull-right[
**`geom_col()`**
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-28-1.png" width="216" style="display: block; margin: auto auto auto 0;" /&gt;
]

--
.pull-left[.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = species
    )
  ) +
  geom_bar()

# stat_count() does the counting automatically 
```
]
]
.pull-right[.footnotesize[

```r
count_data &lt;- 
  penguins %&gt;%
  count(species, name = 'count')

ggplot(
  count_data,
  aes(
    x = species,
    y = count
    )
  ) +
  geom_col()
```
]
]

---

## Creating a barplot with .UA-red[`geom_bar()`]

.pull-left[

- Add color to barplot by defining an additional *aesthetic*: **`fill`**

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = species
    )
  ) +
  geom_bar(
    ## Additional aesthetic: "fill"-scale
    aes(fill = species) 
    )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-32-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a barplot with .UA-red[`geom_bar()`]

.pull-left[

- Determine `fill`-colors by adding **`scale_fill_manual()`**

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = species
    )
  ) +
  geom_bar(
    aes(fill = species)
    ) +
  ## Specify fill-colors
  scale_fill_manual( 
    values = c("darkorange", "purple", "cyan4") 
    ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-34-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a barplot with .UA-red[`geom_bar()`]

.pull-left[

- Add title, subtitle and change label of x-axis using **`labs()`**

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = species
    )
  ) +
  geom_bar(
    aes(fill = species)    ) +
  scale_fill_manual(
    values =
      c("darkorange","purple","cyan4")
    ) +
  ## Add title, subtitle and label x-axis
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-36-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a barplot with .UA-red[`geom_bar()`]

.pull-left[

- Add another *theme* using **`theme_minimal()`**

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = species
    )
  ) +
  geom_bar(
    aes(fill = species)
    ) +
  scale_fill_manual(
    values =
      c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  ) +
  ## Choose theme
  theme_minimal()
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-38-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a barplot with .UA-red[`geom_bar()`]

.pull-left[

- Flip x- and y-axis using **`coord_flip()`**  
- Remove legend using **`theme(legend.position = "none")`**  

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = species
    )
  ) +
  geom_bar(
    aes(fill = species)
    ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  ) +  
  ## Flip x- and y-axis
  coord_flip( ) + 
  theme_minimal( ) +
  ## Remove legend
  theme(
    legend.position = "none"
  ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-40-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a lollipop plot

.pull-left[

Use two *geoms*: .UA-red[**`geom_point()`**] and .UA-red[**`geom_segment()`**]   

.font50[

```r
penguins %&gt;% 
  count(species) %&gt;% 
  ggplot(
    aes(
      x = species, 
      y = n)
    ) + 
  geom_point( 
    aes(col = species) 
  ) +  
  geom_segment(  
    aes(
      x = species,
      xend = species, 
      y = 0, 
      yend = n, 
      col = species
      )
    ) + 
```
]

Re-use remainder of code!  

.font50[

```r
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  ) +  
  coord_flip( ) + 
  theme_minimal( ) +
  theme(
    legend.position = "none" 
  ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-43-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---
## Creating a lollipop plot 

.pull-left[
- Reorder 'bars' by creating a new variable using **`fct_reorder()`**

.font50[

```r
penguins %&gt;% 
  count(species) %&gt;% 
  ## Create an ordered factor
  mutate( 
    species_ord = fct_reorder(species,n) 
    ) %&gt;% 
  ggplot(
    aes(x = species_ord)) + 
  geom_point( 
    aes(col = species) 
  ) + 
  geom_segment(  
    aes(
      x = species,
      xend = species, 
      y = 0, 
      yend = n,
      col = species
      ) 
    ) + 
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  ) +  
  coord_flip( ) + 
  theme_minimal( ) +
  theme(
    legend.position = "none"
    ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-45-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Chosing colors ...

&lt;img src="img/colours_ggplot.jpg" width="70%" height="70%" style="display: block; margin: auto auto auto 0;" /&gt;

.footnote[http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/]

---

class: inverse-blue

# &lt;i class="fas fa-laptop-code" style="color: #FF0035;"&gt;&lt;/i&gt; Exercises `[ggplot2]` : part 1

.left-column[
![](https://media.giphy.com/media/A9grgCQ0Dm012/giphy.gif)
]
.right-column[
- You can find the qmd-file .SW-greenD[ `Exercises_ggplot2.qmd`] at the course website.

- Download the qmd-file .SW-greenD[ `Exercises_ggplot2.qmd`] to your laptop 

- Open the file in `RStudio`

- The file contains a set of coding assignments with empty code blocks

- Now, we focus on part 1 of the exercises

- Write the code (and test it by running it)

- Stuck? No Worries! 
  - We are there
  - Help each other
  - There is a solution key (at the website) (.SW-greenD[`Exercises_ggplot2_solutions.qmd`]) 
]
---
class: inverse-green, center, middle
name: part5

# 5. Visualising a quantitative variable

---

## Visualising a quantitative variable?

.left-column[
There are many ways to visualise a quantitative variable...   

Can you think of some?]

--
.right-column[
&lt;img src="img/fundamentals_viz.png" width="45%" height="45%" style="display: block; margin: auto;" /&gt;
&lt;br&gt;   
.right[.font60[
*Taken from [Fundamentals of Data Visualization](https://clauswilke.com/dataviz/directory-of-visualizations.html) by Claus Wilke*
]
]
]

---

## Creating a histogram with .UA-red[`geom_histogram()`]

.pull-left[
.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = flipper_length_mm
    )
  ) +
  geom_histogram()
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-49-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a histogram with .UA-red[`geom_histogram()`]

.pull-left[

- Change breaks on y-axis using **`scale_y_continuous()`** 

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = flipper_length_mm
    )
  ) +
  geom_histogram() +
  ## Specify breaks
  scale_y_continuous( 
    breaks = c(seq(0, 25, 5), 29) 
    ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-51-1.png" width="360" style="display: block; margin: auto;" /&gt;
]


---

## Creating a histogram with .UA-red[`geom_histogram()`]


.pull-left[

- Change transparency using argument **`alpha`**   
- Remove minor grid lines using argument **`panel.grid.minor = element_blank()`**

.font60[

```r
ggplot(
  penguins,
  aes(
    x = flipper_length_mm,
    fill = species
    )
  ) +
  geom_histogram(
    ## Change transparency of points
    alpha = .7 
  ) +
  ## Specify breaks
  scale_y_continuous( 
    breaks = c(seq(0, 25, 5), 29) 
    ) + 
  scale_fill_manual(
    values =
      c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Histogram of flipper length",
    x = "Flipper length"
  ) +
  theme_minimal() +
  theme(
    ## Remove minor grid lines
    panel.grid.minor = element_blank()
  ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-53-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a density plot&lt;sup&gt;°&lt;/sup&gt; with .UA-red[`geom_density()`]

.pull-left[

- Replace `geom_histogram()` with **`geom_density()`** plot

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = flipper_length_mm,
    fill = species
    )
  ) +
  ## Use geom_density
  geom_density(
    alpha = .7
  ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Density plot of flipper length",
    x = "Flipper length"
  ) + 
  theme_minimal()
```
.left[.font70[
&lt;sup&gt;*°*&lt;/sup&gt;*surface below curve = 100%*
]]
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-55-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a density plot with .UA-red[`geom_density()`]

.pull-left[
- Only colored lines by replacing argument **`fill`** with **`color`**

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = flipper_length_mm,
    color = species
    )
  ) +
  geom_density() + 
  ## Replace scale_color with scale_fill
  scale_color_manual( 
    values = c("darkorange","purple","cyan4") 
    ) + 
  labs(
    title = "Palmer penguins",
    subtitle = "Density plot of flipper length",
    x = "Flipper length"
  ) + 
  theme_minimal() +
  theme(
    panel.grid.minor = element_blank()
    )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-57-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Or even better ... .UA-red[`geom_violin()` + `geom_jitter()`]

.pull-left[
.font50[

```r
ggplot(
  penguins,
  aes(
    x = species,
    y = flipper_length_mm,
    ## Aesthetics fill and color applied to EVERY geom
    fill = species,
    color = species
    )
  ) +
  ## Use geom_violin and geom_jitter
  geom_violin(
    alpha = .65
  ) +
  geom_jitter(
    alpha = .7
  ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  scale_color_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Density plot voor flipper lengte",
    y = "Flipper length",
    x = "",
  ) + 
  theme_minimal() +
  theme(
    legend.position = "none"
    )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-59-1.png" width="360" /&gt;
]

---

## Or even better .UA-red[`geom_violin()` + `geom_jitter()`]

.pull-left[
- Put names of species on top using argument **`position="top"`**   
- Remove minor grid lines using argument **`panel.grid.major = element_blank()`**

.font40[

```r
ggplot(
  penguins,
  aes(
    x = species,
    y = flipper_length_mm,
    fill = species,
    color = species
    )
  ) +
  geom_violin(
    alpha = .65
  ) +
  geom_jitter(
    alpha = .7
  ) +
  scale_x_discrete(
    position = "top"
    ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  scale_color_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Density plot of flipper length",
    y = "Flipper length",
    x = "",
  ) + 
  theme_minimal() + 
  theme(
    legend.position = "none",
    panel.grid.minor = element_blank(),
    ## Remove major grid lines
    panel.grid.major.x = element_blank()
    ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-61-1.png" width="360" /&gt;
]

---

## Or a *rain cloud plot*  

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-62-1.png" width="432" style="display: block; margin: auto;" /&gt;

.center[.font60[*Based on the tutorial of Cédric Scherer: https://www.cedricscherer.com/*]]

---
name: raincloud
## Or a *rain cloud plot*  ([Appendix 1: How to grow a rain cloud plot?](#appendix1))

Additional package required: .UA-red[`ggdist`]

.footnotesize[

```r
library(ggdist)
ggplot(penguins, aes(x = species, y = flipper_length_mm)) + 
  stat_halfeye(
    adjust = .5, 
    width = .6, 
    .width = 0, 
    justification = -.2, 
    point_colour = NA
  ) + 
  geom_boxplot(
    width = .15, 
    outlier.shape = NA
  ) +
  geom_point(
    size = 1.3,
    alpha = .3,
    position = position_jitter(
      seed = 1, width = .1
  )) +
  labs(
    title = "Palmer penguins",
    subtitle = "Distribution of flipper length by species",
    x = "",
    y = "Flipper length"
  ) +
  coord_cartesian(xlim = c(1.2, NA), clip = "off") +
  coord_flip() +
  theme_minimal()
```
]
---
class: inverse-blue

# &lt;i class="fas fa-laptop-code" style="color: #FF0035;"&gt;&lt;/i&gt; Exercises `[ggplot2]` : part 2

.left-column[
![](https://media.giphy.com/media/A9grgCQ0Dm012/giphy.gif)
]
.right-column[
- You can find the qmd-file .SW-greenD[ `Exercises_ggplot2.qmd`] on the Open Science Framework (Exercises &gt; Exercise3_ggplot2)

- Download this file to your laptop

- Open the file in `RStudio`

- The file contains a set of coding assignments with empty code blocks

- Now, we focus on part 2 of the exercises

- Write the code (and test it by running it)

- Stuck? No Worries! 
  - We are there
  - Help each other
  - There is a solution key (.SW-greenD[`Exercises_ggplot2_solutions.qmd`]) 
]

---
class: inverse-green, center, middle
name: part6

# 6. Visualising more than one variable

---

## Visualising more than one variable?
.left-column[
There are many ways to visualise more than one variable... 
The choice depends (among other things) on the type of variables you want to plot: 
- only quantitative variables;  
- only qualitative variables;  
- or a combination of both    

Can you think of an example of each?]

--
.right-column[
&lt;img src="img/data_to_viz2.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;
&lt;br&gt;   
.center[.font100[
*Have a look at [data to viz.com](https://www.data-to-viz.com)*
]
]
]

---

## Visualising more than one variable  
&lt;br&gt;  
&lt;br&gt;  
We focus today upon:
- **scatterplots** .font80[(two numeric variables,  two numeric variables and one categorical variable)]  
- **grouped barplots**  .font80[(two categorical variables)]   

---

## Creating a scatterplot with .UA-red[`geom_point()`]

.pull-left[
.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = body_mass_g,
    y = flipper_length_mm
    )
  ) +
  geom_point() +
  labs(
    title = "Palmer penguins",
    subtitle = "Relation of flipper length with body mass",
    y = "Flipper length",
    x = "Body mass",
  ) + 
  theme_minimal() + 
  theme(
    legend.position = "none"
    )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-66-1.png" width="360" /&gt;
]

---
## Creating a scatterplot with  .UA-red[`geom_point()`] and .UA-red[`geom_smooth()`]

.pull-left[
.footnotesize[

- Add trend line using **`geom_smooth()`**  


```r
ggplot(
  penguins,
  aes(
    x = body_mass_g,
    y = flipper_length_mm
    )
  ) +
  geom_point() +
  ## Add a trendline
  geom_smooth() +
  labs(
    title = "Palmer penguins",
    subtitle = "Relation of flipper length with body mass",
    y = "Flipper length",
    x = "Body mass"
  ) + 
  theme_minimal() + 
  theme(
    legend.position = "none"
    )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-68-1.png" width="360" /&gt;
]

---

## Creating a scatterplot with  .UA-red[`geom_point()`] and .UA-red[`geom_smooth()`]

.pull-left[

- Linear trend line using argument **`method = "lm"`**      
- Remove confidence intervals using argument **`se = FALSE`**    

.footnotesize[

```r
ggplot(
  penguins,
  aes(
    x = body_mass_g,
    y = flipper_length_mm
    )
  ) +
  geom_point() +
  geom_smooth( 
    ## Add linear trend line
    method = "lm", 
    ## Remove confidence band
    se = FALSE 
  ) + 
  labs(
    title = "Palmer penguins",
    subtitle = "Correlation between flipper length and body mass",
    y = "Flipper length",
    x = "Body mass",
  ) + 
  theme_minimal() + 
  theme(
    legend.position = "none"
    )
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-70-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a scatterplot with  .UA-red[`geom_point()`] and .UA-red[`geom_smooth()`]

.pull-left[

- Add shape and color by specifying *aesthetics*: **`shape`** and **`color`**  
- Change legend position and background, position of plot title, and layout  of (sub)title   

.font40[

```r
ggplot(
  penguins,
  aes(
    x = flipper_length_mm,
    y = body_mass_g
    )
  ) +
  geom_point(
    aes(
      color = species,
      shape = species
      ),
    size = 3,
    alpha = 0.8
    ) +
  geom_smooth(
    aes(color = species),
    se = F, 
    method = "lm"
    ) +
  theme_minimal() +
  scale_color_manual(
    values = c("darkorange","purple","cyan4")) +
  labs(
    title = "Palmer penguins",
    subtitle = "Correlation between flipper length and body mass",
    y = "Flipper length",
    x = "Body mass",
    color = "Species", 
    shape = "Species") + 
  theme(
    legend.position = c(0.2, 0.7), 
    legend.background = element_rect(fill = "white", color = NA),
    plot.title.position = "plot",
    plot.title = element_text(hjust = 0, face= "bold"),
    plot.subtitle = element_text(hjust = 0, face= "italic")
    ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-72-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a scatterplot with  .UA-red[`geom_point()`] and .UA-red[`geom_smooth()`]

.pull-left[

- Adds facets using **`facet_wrap()`**  

.font60[

```r
ggplot(
  penguins,
  aes(
    x = body_mass_g,
    y = flipper_length_mm
    )
  ) +
  geom_point( ) +
  geom_smooth(
    method = "lm",
    se = FALSE
  ) +
  facet_wrap(~species) + 
  labs(
    title = "Palmer penguins",
    subtitle = "Correlation between flipper length and body mass",
    y = "Flipper length",
    x = "Body mass",
  ) + 
  theme_minimal() + 
  theme(
    legend.position = "none",
    plot.title = element_text(hjust = 0, face= "bold"),
    plot.subtitle = element_text(hjust = 0, face= "italic")
    ) 
```
]
]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-74-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a barplot of two variables (counts)

.pull-left[
Grouped barplot of counts using  
**`position_dodge()`**  

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-75-1.png" width="216" style="display: block; margin: auto auto auto 0;" /&gt;
]
.pull-right[
Stacked barplot of counts using argument  
**`position_stack()`** 

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-76-1.png" width="216" style="display: block; margin: auto auto auto 0;" /&gt;
]

--
.pull-left[.footnotesize[

```r
penguins %&gt;% 
  ggplot(
    aes(
      x = island,
      fill = species
      )
    ) +
  geom_bar(
    position = position_dodge()
    ) +
  theme_minimal()
```
]
]
.pull-right[.footnotesize[

```r
penguins %&gt;% 
  ggplot(
    aes(
      x = island,
      fill = species)
    ) +
  geom_bar(
    position = position_stack()
    ) +
  theme_minimal()
```
]
]

---

## Creating a barplot of two variables (percentage)

.pull-left[

- Switch to relative frequencies using **`position_fill()`**  


```r
penguins %&gt;% 
  ggplot(
    aes(
      x = island,
      fill = species
      )
    ) +
  geom_bar(
    position = position_fill()
    ) +
  theme_minimal()
```
]
.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-80-1.png" width="360" style="display: block; margin: auto;" /&gt;
]

---

## Creating a barplot of two variables (percentage)

.pull-left[
- Add texts to bars using **`geom_text()`**  
- Add "fill" colors using **`scale_fill_brewer()`**  
- Remove additional space using **`coord_cartesian(expand=FALSE)`**  

.font40[

```r
penguins %&gt;% 
  ggplot(
    aes(
      x = island,
      fill = species
      )
    ) +
  geom_bar(
    position = position_fill(),
    alpha = .9
    ) +
  geom_text(
    aes(label = ..count..),
    stat = "count",
    colour = "white",
    position = position_fill(vjust = 0.5)
    ) +
  scale_fill_brewer(
    type = "qual", 
    palette = 6
  ) +
  scale_x_discrete(position = "top")+
  scale_y_continuous(breaks = c(0.5, 1)) +
  labs(
    title = "Palmer penguins",
    subtitle = "Distribution of penguin species by island",
    fill = "Species"
  ) +
  coord_cartesian(expand = FALSE) +
  theme_minimal() + 
  theme(
    plot.title = element_text(size = 20, face = "bold"),
    plot.subtitle = element_text(size = 16, face = "italic"),
    axis.title = element_blank(),
    axis.text.x = element_text(size = 14, face = "bold"),
    legend.title = element_text(face = "bold"),
    panel.grid.minor = element_blank(),
    panel.grid.major.x = element_blank()
    )
```
]
]
.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-82-1.png" width="504" /&gt;
]

---

## Chosing colors ...

.pull-left[
- Colors are not meaningless and ... they grab attention  

-  R has several built-in color palettes. The functions `scale_fill_brewer` and  `scale_color_brewer` use palettes of [RColorBrewer](https://r-graph-gallery.com/38-rcolorbrewers-palettes.html). These palettes come in three 'flavours':
  - **sequential**: for ordered data .font80[((for example, scoring low/mediocre/high on a likert scale)]   
  - **qualitative**: for nominal or categorical information .font80[(for example, different islands)] 
  - **diverging**: for ordered data with meaningful mid values .font80[((for example, temperature or change in score)]   
   
]
.pull-right[
&lt;img src="http://www.sthda.com/sthda/RDoc/figure/graphs/colors-in-r-rcolorbrewer-palettes.png" width="65%" style="display: block; margin: auto;" /&gt;
]


---
class: inverse-blue

# &lt;i class="fas fa-laptop-code" style="color: #FF0035;"&gt;&lt;/i&gt; Exercises `[ggplot2]` : part 3

.left-column[
![](https://media.giphy.com/media/A9grgCQ0Dm012/giphy.gif)
]
.right-column[
- You can find the qmd-file .SW-greenD[ `Exercises_ggplot2.qmd`] on the Open Science Framework (Exercises &gt; Exercise3_ggplot2)

- Download this file to your laptop

- Open the file in `RStudio`

- The file contains a set of coding assignments with empty code blocks

- Now, we focus on part 3 of the exercises

- Write the code (and test it by running it)

- Stuck? No Worries! 
  - We are there
  - Help each other
  - There is a solution key (.SW-greenD[`Exercises_ggplot2_solutions.qmd`]) 
]


---
class: inverse-green, center, middle
name: part7

# 7. More about visualisation?

---

## The tip of the icebeRg...

.pull-left[
.center[
[Gallery of different types of visualisations accompanied by ggplot-code](https://r-graph-gallery.com/index.html)]  

&lt;img src="img/R_gallery.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;
 ]   

.pull-right[
.center[
[Top50 ggplot visualisations...](http://r-statistics.co/Top50-Ggplot2-Visualizations-MasterList-R-Code.html)]  

&lt;img src="img/top50.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;
]

.pull-left[
.center[
[library of graphs with ggplot-code](https://r-charts.com/ggplot2/) 
]

&lt;img src="img/rchart.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;
]   

.pull-right[
.center[
[ggplot-extentions](https://exts.ggplot2.tidyverse.org/gallery/)
]

&lt;img src="img/extensions.png" width="65%" height="65%" style="display: block; margin: auto;" /&gt;
] 

---

## Which visualisation to use?

.pull-left[
.center[
[Visual vocabulary](http://ft-interactive.github.io/visual-vocabulary/)]  
&lt;img src="img/vocabulary.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;
]   

.pull-right[
.center[
[The Data Visualisation Catalogue](https://datavizcatalogue.com/search.html)]       
&lt;img src="img/catalogue.png" width="40%" height="40%" style="display: block; margin: auto;" /&gt;
]
&lt;br&gt;  
.pull-left[
.center[
[Research visuals: all the resources ...](https://baryon.be/visuals-resources/) 
]
&lt;img src="img/visuals.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;
]   

.pull-right[
.center[
[Website of Cedric Scherer](https://www.cedricscherer.com/)]
&lt;img src="img/cedric.png" width="60%" height="60%" style="display: block; margin: auto;" /&gt;
]

---

## In need of help?

.pull-left[**Don't forget RStudio's help-function!**
&lt;br&gt;
&lt;img src="img/help.png" width="70%" height="70%" /&gt;
]

.pull-right[
**Google is your best fRiend...**

Just google your question and you'll find code, examples, ...

**Generative AI can help as well!**
]



---
class: inverse-green, center, middle
name: appendix1



# Appendix 1 

*How to grow a rain cloud plot?*

&lt;br&gt; &lt;br&gt;&lt;br&gt;

[Back to slide show...](#raincloud)

---

## Step 1
.pull-left[

.footnotesize[



```r
library(ggdist)

P1 &lt;- 
  ggplot(
    penguins, 
    aes(
      x = species,
      y = flipper_length_mm
      )
    ) + 
  stat_halfeye() 

P1
```
]

]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-94-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Step 2
.pull-left[

.footnotesize[

```r
P1 &lt;- 
  ggplot(
    penguins, 
    aes(
      x = species, 
      y = flipper_length_mm
      )
    ) + 
  stat_halfeye(
    adjust = .5, 
    width = .6, 
    .width = 0, 
    justification = -.2, 
    point_colour = NA
  ) 

P1
```
]

]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-96-1.png" width="504" style="display: block; margin: auto;" /&gt;
]


---

## Step 3

.pull-left[

.footnotesize[

```r
P2 &lt;- P1 + 
  geom_boxplot(
    width = .15, 
    outlier.shape = NA
  ) 

P2
```
]

]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-98-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Step 4

.pull-left[

.footnotesize[

```r
P3 &lt;- P2 + 
  geom_point(
    size = 1.3,
    alpha = .3,
    position = position_jitter(
      seed = 1,
      width = .1
      )
    ) 

P3
```
]

]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-100-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Step 5

.pull-left[

.footnotesize[

```r
P4 &lt;- P3 + 
  labs(
    title = "Palmer penguins",
    subtitle = "Distribution of flipper length by species",
    x = "",
    y = "Flipper length"
  ) 

P4
```
]

]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-102-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Step 6

.pull-left[

.footnotesize[

```r
P5 &lt;- P4 +
  coord_cartesian(xlim = c(1.2, NA), clip = "off") +
  coord_flip() +
  theme_minimal() +
  theme(
    plot.title.position = "plot",
    plot.title = element_text(face = "bold"),
    plot.subtitle = element_text(face = "italic")
    )

P5
```
]

]

.pull-right[
&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-104-1.png" width="504" style="display: block; margin: auto;" /&gt;
]
---
class: inverse-green, center, middle

## THE RAIN CLOUD PLOTS / [Back to slide show...](#raincloud)

&lt;img src="slides_part-4_files/figure-html/unnamed-chunk-105-1.png" width="504" style="display: block; margin: auto;" /&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
