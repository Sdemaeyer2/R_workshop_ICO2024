<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>INPUT - OUTPUT Workshop R &amp; RStudio</title>
    <meta charset="utf-8" />
    <script src="libs/header-attrs-2.11/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="extra.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">

class: title-slide, center, middle

&lt;link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous"&gt;






&lt;style&gt;

.center2 {
  margin: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}

.rcorners1 {
  margin: auto;
  border-radius: 25px;
  background: #ada500;
  padding: 10px;
#  width: 50%;
}
&lt;/style&gt;

&lt;style type="text/css"&gt;
.right-column{
  padding-top: 0;
}

.remark-code, .remark-inline-code { font-family: 'Source Code Pro', 'Lucida Console', Monaco, monospace;
                                    font-size: 90%;
                                  }

&lt;/style&gt;


&lt;div class="my-logo-left"&gt; &lt;img src="img/UA-eng-hor-1-RGB.jpg" width="110%"/&gt; &lt;/div&gt;
&lt;div class="my-logo-right"&gt; &lt;img src="img/logo_VLHORA.svg" width="110%"/&gt; &lt;/div&gt;


# INPUT - OUTPUT Workshop R &amp; RStudio
.font160[
.SW-greenD[Deel 4]
]
.font120[
.SW-greenD[*Krachtige visualisaties met*] .UA-red[*`ggplot2`*]
]
Sven De Maeyer

.font80[
.UA-red[
07/12/2021
]
]

---
class: inverse-green, left

# Overzicht

.center2[
- Eenvoudige plotjes in R --- ([doorklikken](#part1))
- Grammar of graphics --- ([doorklikken](#part2))
- Hoe werkt `ggplot2`? --- ([doorklikken](#part3))
- Categorische variabelen visualiseren --- ([doorklikken](#part4))
- Kwantitatieve variabelen visualiseren --- ([doorklikken](#part5))
- Samenhang visualiseren --- ([doorklikken](#part6))
]

---
class: inverse-green, center, middle
name: part1

# 1. Eenvoudige plotjes in R

---

## Plotjes uit .UA-red[`base`]


De generieke .UA-red[`plot()`] functie


```r
plot(RIASEC$age)
```

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-2-1.png" width="288" /&gt;

---

## Plotjes uit .UA-red[`base`]


De generieke .UA-red[`plot()`] functie


```r
plot(table(RIASEC$Geslacht))
```

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-3-1.png" width="288" /&gt;

---

## Plotjes uit .UA-red[`base`]


De generieke .UA-red[`plot()`] functie


```r
plot(RIASEC$age, RIASEC$Conventional)
```

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-4-1.png" width="360" /&gt;

---

## Plotjes uit .UA-red[`base`]


De .UA-red[`boxplot()`] functie


```r
boxplot(RIASEC$Conventional)
```

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-5-1.png" width="360" /&gt;

---

## Plotjes uit .UA-red[`base`]


De .UA-red[`hist()`] functie


```r
hist(RIASEC$Conventional)
```

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-6-1.png" width="360" /&gt;

---
class: inverse-green, center, middle
name: part2

# 2. Grammar of Graphics

---

## Een meer theoretische benadering van grafieken

.left-column[
&lt;img src="Grammar_of_Graphics_cover.jpeg" width="70%" height="70%" /&gt;
]

.right-colum[
&lt;br&gt;
&lt;br&gt;
&lt;br&gt;
- Theoretisch uiteenrafelen van data visualisaties

- Vormt de basis van verschillende moderne grafische applicaties:
  - ggplot2
  - Tableau (Polaris)
  - Vega-Lite
]

.footnote[*Slide gebaseerd op slides van Thomas Lin Pedersen https://github.com/thomasp85/ggplot2_workshop/blob/master/presentation.pdf*]
---

## Centraal idee achter Grammar of Graphics

&lt;img src="Slides_TP_1.jpg" width="70%" height="70%" /&gt;

.footnote[*Slide uit slideshow van Thomas Lin Pedersen https://github.com/thomasp85/ggplot2_workshop/blob/master/presentation.pdf*]

---

## Grammar of Graphics: .SW-greenD[Data]

- Data is niet enkel ruwe dataset (kan ook waarden van schattingen op basis van anlayses zijn)

&lt;br&gt;


&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Group &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Gender &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean_age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Sd_age &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CI_lower &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; CI_upper &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; BE Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60.56 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; BE Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 41 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.13 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 66.87 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; BE Other &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; BE &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Other &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 52.07 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NL Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 37 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13.48 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 60.52 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NL Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8.56 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 63.44 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; NL Other &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; NL &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Other &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 7.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.89 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.11 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


- Data hoort 'tidy' te zijn (enkel rijen en kolommen)

---

## Grammar of Graphics: .SW-greenD[Mapping]

`\(=\)` Verbinden van elementen van een grafiek met de Data

&lt;br&gt;

.SW-greenD[*Aesthetic* mapping] 

`\(=\)` de link tussen waarden voor een variabele in de Data en de 'geometry' (bv. hoogte van een balk; x-positie van een punt; kleur van punt; dikte van een punt; vorm van een punt) 

&lt;br&gt;

 .SW-greenD[*Facet* mapping] 

`\(=\)` de link tussen waarden voor een variabele in de Data en de panelen die in een grafiek worden onderscheiden (bv. apart paneel per land)

---

## Grammar of Graphics: .SW-greenD[Statistics]

- Data is misschien wel `tidy`, maar wil niet zeggen dat de data-input van een graphic al meteen de juiste waarden bevatten die dienen te worden weergegeven
  - Bv. eerst beschrijvende statistieken berekenen om een boxplot te kunnen plotten
  - Bv. eerst een lineair (of ander) model schatten om een lijn doorheen puntenwolk te trekken 

- Vaak impliciet achter bepaalde types van grafieken

---

## Grammar of Graphics: .SW-greenD[Scales]

- Data dient te worden vertaald naar 'grafische eigenschappen' (= Scales)

- Voorbeelden:
  - Categorieën `\(\rightarrow\)` Kleuren;
  - Categorieën `\(\rightarrow\)` Vorm (driehoekje; bolletje; kruisje; ...);
  - Nummers `\(\rightarrow\)` Plaats (x- en y- coördinaten);
  - Nummers `\(\rightarrow\)` Grootte;
  - ...

- Implicatie is dat waarde moeten op een bepaalde wijze geïnterpreteerd worden: discrete; continuous; ...

---

## Grammar of Graphics: .SW-greenD[Geometries]

- Welke geometrische vormen zijn de basis van de grafische representatie?

- Voorbeelden:
  - punten op een x- en y-assen stelsel;
  - boxplots;
  - polygonen;
  - een lijn;
  - ...

---

## Grammar of Graphics: .SW-greenD[Facets]

- Hoeveel panelen worden weergegeven?

- Hoe de panelen te definiëren?

---
class: inverse-green, center, middle
name: part3

# 3. Hoe werkt `ggplot2`?

---
&lt;div class="my-logo-right"&gt; &lt;img src="palmerpenguins_hex.png" width="100%"/&gt; &lt;/div&gt;

## Tijd om de pinguïns erbij te halen...

Leuke data (Bron: https://allisonhorst.github.io/palmerpenguins/articles/intro.html)


```r
install.packages("palmerpenguins")
library(palmerpenguins)
data("penguins")
```

&lt;img src="lter_penguins.png" width="50%" height="50%" /&gt;

&lt;p align="right"&gt;.footnotesize[.SW-greenD[*Artwork by @allison_horst*]] &lt;/p&gt;

---
&lt;div class="my-logo-right"&gt; &lt;img src="palmerpenguins_hex.png" width="100%"/&gt; &lt;/div&gt;

## Tijd om de pinguïns erbij te halen...

&lt;table&gt;
&lt;caption&gt;Table 1. Random sample of 10 observations from the Palmer Pinguins dataset&lt;/caption&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; species &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; island &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bill_length_mm &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; bill_depth_mm &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; flipper_length_mm &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; body_mass_g &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; sex &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; year &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Dream &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 39.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 178 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3250 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gentoo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 47.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4975 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2009 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gentoo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 49.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 212 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4625 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2009 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Torgersen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 35.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 189 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3350 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2009 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gentoo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 46.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 217 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5200 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2008 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gentoo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 50.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 224 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5350 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2009 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 197 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4775 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2009 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Gentoo &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Biscoe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 45.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Torgersen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 198 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4400 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; male &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Adelie &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Torgersen &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 185 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3700 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; female &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2007 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

## De basis .UA-red[`ggplot2`]

.pull-left[

```r
Plot &lt;- ggplot(

  ## Stap 1: de Data
  data = penguins,
  
  ## Stap 2: Mapping
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
)

Plot
```
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-14-1.png" width="360" /&gt;
]

---

## De basis .UA-red[`ggplot2`]

.pull-left[

```r
Plot &lt;- ggplot(

  ## Stap 1: de Data
  data = penguins,
  
  ## Stap 2: Mapping
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
) +
  ## Stap 3: Geometries toevoegen
  geom_point()


Plot
```
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-16-1.png" width="360" /&gt;
]

Merk op dat we enkel stappen van de *Grammar of Graphics* niet dienden te definiëren omdat ze allen logische *default* waarden hebben

---

## De basis .UA-red[`ggplot2`] met meerdere .UA-red[facets]

.pull-left[

```r
Plot &lt;- ggplot(

  ## Stap 1: de Data
  data = penguins,
  
  ## Stap 2: Mapping
  aes(
    x = flipper_length_mm,
    y = body_mass_g)
) +
  ## Stap 3: Geometries toevoegen
  geom_point() +
  
  ## Stap 4: Facets definiëren
  facet_wrap(.~species)


Plot
```
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-18-1.png" width="360" /&gt;
]

---

## Een visualisatie laten 'groeien' door laagjes toe te voegen ...


&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-19-1.png" width="1152" style="display: block; margin: auto;" /&gt;

---

## De verschillende .UA-red[`geom_*`] opties

&lt;img src="ggplot2_cheatsheet.jpg" width="50%" height="50%" /&gt;

De *cheatsheet*:
https://github.com/rstudio/cheatsheets/blob/main/data-visualization-2.1.pdf

---
class: inverse-green, center, middle
name: part4

# 4. Categorische variabele visueel samenvatten met .UA-red[`ggplot2`]

.white[*"de bar is open" *]

---

## Barplot maken met .UA-red[`geom_bar()`]

.pull-left[
- `species` op de x-as zetten
- `geom_bar()` 
- op de achtergrond worden aantallen automatisch geteld (= `stat_count()`)

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species
       )) +
  geom_bar()
```
]
]
.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-22-1.png" width="360" /&gt;
]


---

## Barplot maken met .UA-red[ `geom_col()`]

.pull-left[

- Heb je reeds samengevatte data, dan kan je `geom_col()` hanteren.



```r
Teldata &lt;- penguins %&gt;%
  count(species, name = 'Aantal')

ggplot(Teldata,
       aes(
         x = species,
         y = Aantal
       )) +
  geom_col()
```



```
## # A tibble: 3 × 2
##   species   Aantal
##   &lt;fct&gt;      &lt;int&gt;
## 1 Adelie       152
## 2 Chinstrap     68
## 3 Gentoo       124
```


]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-25-1.png" width="360" /&gt;
]

---

## Barplot maken met .UA-red[ `geom_bar()`]

.pull-left[

- Kleur toevoegen door een extra *schaal* te definiëren: de .SW-greenD[`fill`]

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species
       )) +
  geom_bar(
    ## Extra mapping: de "fill" schaal
    aes(fill = species)
    )
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-27-1.png" width="360" /&gt;
]

---

## Barplot maken met .UA-red[ `geom_bar()`]

.pull-left[

- Kleurenpallette manueel bepalen adhv extra laag met .SW-greenD[`scale_fill_manual()`]

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species
       )) +
  geom_bar(
    aes(fill = species)
    ) +
  # Zelf kleuren kiezen
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    )
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-29-1.png" width="360" /&gt;
]

---

## Barplot maken met .UA-red[ `geom_bar()`]

.pull-left[

- titels toevoegen/veranderen met extra laag .SW-greenD[`labs()`]

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species
       )) +
  geom_bar(
    aes(fill = species)
    ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  # Labs laag voor titels en x-as label
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  )
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-31-1.png" width="360" /&gt;
]

---

## Barplot maken met .UA-red[ `geom_bar()`]

.pull-left[

- ander *theme* hanteren .SW-greenD[`theme_minimal()`]

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species
       )) +
  geom_bar(
    aes(fill = species)
    ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  ) +
  # Ander thema kiezen
  theme_minimal()
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-33-1.png" width="360" /&gt;
]

---
## Barplot maken met .UA-red[ `geom_bar()`]

.pull-left[

- de richting omdraaien .SW-greenD[`coord_flip()`]
- legende verwijderen .SW-greenD[`theme(legend.position = "none")`]

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species
       )) +
  geom_bar(
    aes(fill = species)
    ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "n observations for species",
    x = ""
  ) +  
  coord_flip( ) +
  theme_minimal( ) +
  theme(
    legend.position = "none"
  )
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-35-1.png" width="360" /&gt;
]

---
## Kleuren kiezen ...

&lt;img src="colours_ggplot.jpg" width="70%" height="70%" /&gt;


http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/
---

class: inverse-blue

# &lt;i class="fas fa-laptop-code" style="color: #FF0035;"&gt;&lt;/i&gt; Oefeningen `[ggplot2]` : deel 1

.left-column[
![](https://media.giphy.com/media/A9grgCQ0Dm012/giphy.gif)
]
.right-column[
- Op Dropbox vind je een document .SW-greenD[ `Oefening_ggplot2.Rmd`]

- Plaats dit document op je pc 

- Open vervolgens het bestand in `R Studio`

- Het document bevat een set van opdrachten met telkens lege code blokken

- Bedoeling is dat je de juiste code schrijft (en test door te laten lopen) om deze opdrachten uit te voeren

- Zit je vast? No Worries! 
  - Ik ben er
  - Je hebt elkaar 
  - Er is een oplossingssleutel .SW-greenD[`Oefening_ggplot2_oplossing.Rmd`] 
]

---
class: inverse-green, center, middle
name: part5

# 5. Kwantitatieve variabelen visualiseren met .UA-red[`ggplot2`]

---

## Histogram met .UA-red[`geom_histogram()`]

.pull-left[
.footnotesize[

```r
ggplot(penguins,
       aes(
         x = flipper_length_mm,
       )) +
  geom_histogram()
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-38-1.png" width="360" /&gt;
]

---

## Histogram met .UA-red[`geom_histogram()`]


.pull-left[

+ gepimpte versie

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = flipper_length_mm,
         fill = species
       )) +
  geom_histogram(
    alpha = .7
  ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Histogram voor flipper lengte",
    x = "Flipper lengte"
  ) +
  theme_minimal()
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-40-1.png" width="360" /&gt;
]

---

## Density plot met .UA-red[`geom_density()`]


.pull-left[

+ density plot (oppervlakte onder de curve = 100%)

.footnotesize[

```r
ggplot(penguins,
       aes(
         x = flipper_length_mm,
         fill = species
       )) +
  geom_density(
    alpha = .7
  ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Density plot voor flipper lengte",
    x = "Flipper lengte"
  ) + theme_minimal()
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-42-1.png" width="360" /&gt;
]

---

## Of beter nog .UA-red[`geom_violin()` + `geom_jitter()`]

.pull-left[
.footnotesize[

```r
ggplot(penguins,
       aes(
         x = species,
         y = flipper_length_mm,
         fill = species,
         color = species
       )) +
  geom_violin(
    alpha = .65
  ) +
  geom_jitter(
    alpha = .7
  ) +
  scale_fill_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  scale_color_manual(
    values = c("darkorange","purple","cyan4")
    ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Density plot voor flipper lengte",
    y = "Flipper lengte",
    x = "",
  ) + theme_minimal() + theme(legend.position = "none")
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-44-1.png" width="360" /&gt;
]

---

## Of een *raincloud plot*  

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-45-1.png" width="432" style="display: block; margin: auto;" /&gt;

.footnote[*Gebaseerd op de tutorial van Cédric Scherer: https://www.cedricscherer.com/*]

---
name: raincloud
## Of een *raincloud plot*  ([Appendix 1: regenwolken laten groeien](#appendix1))

Extra pakket nodig: .UA-red[`ggdist`]

.footnotesize[

```r
library(ggdist)
ggplot(penguins, aes(x = species, y = flipper_length_mm)) + 
  stat_halfeye(
    adjust = .5, 
    width = .6, 
    .width = 0, 
    justification = -.2, 
    point_colour = NA
  ) + 
  geom_boxplot(
    width = .15, 
    outlier.shape = NA
  ) +
  geom_point(
    size = 1.3,
    alpha = .3,
    position = position_jitter(
      seed = 1, width = .1
  )) +
  labs(
    title = "Palmer penguins",
    subtitle = "Verdeling van flipper lengte per soort",
    x = "",
    y = "flipper lengte"
  ) +
  coord_cartesian(xlim = c(1.2, NA), clip = "off") +
  coord_flip() +
  theme_minimal()
```
]
---
class: inverse-blue

# &lt;i class="fas fa-laptop-code" style="color: #FF0035;"&gt;&lt;/i&gt; Oefeningen `[ggplot2]` : deel 2

.left-column[
![](https://media.giphy.com/media/A9grgCQ0Dm012/giphy.gif)
]
.right-column[
- Op Dropbox vind je een document .SW-greenD[ `Oefening_ggplot2.Rmd`]

- Plaats dit document op je pc 

- Open vervolgens het bestand in `R Studio`

- Het document bevat een set van opdrachten met telkens lege code blokken

- Bedoeling is dat je de juiste code schrijft (en test door te laten lopen) om deze opdrachten uit te voeren

- Zit je vast? No Worries! 
  - Ik ben er
  - Je hebt elkaar 
  - Er is een oplossingssleutel .SW-greenD[`Oefening_ggplot2_oplossing.Rmd`] 
]

---
class: inverse-green, center, middle
name: part6

# 6. Samenhang visualiseren met .UA-red[`ggplot2`]

---

## De puntenwolk met .UA-red[`geom_point()`]

.pull-left[
.footnotesize[


```r
ggplot(penguins,
       aes(
         x = body_mass_g,
         y = flipper_length_mm
       )) +
  geom_point( ) +
  geom_smooth( ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Samenhang tussen flipper lengte en body mass",
    y = "Flipper lengte",
    x = "Body mass",
  ) + theme_minimal() + theme(legend.position = "none")
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-48-1.png" width="360" /&gt;
]

---
## De puntenwolk met .UA-red[`geom_point()`] en .UA-red[`geom_smooth()`]

.pull-left[
.footnotesize[


```r
ggplot(penguins,
       aes(
         x = body_mass_g,
         y = flipper_length_mm
       )) +
  geom_point( ) +
  geom_smooth( ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Samenhang tussen flipper lengte en body mass",
    y = "Flipper lengte",
    x = "Body mass",
  ) + theme_minimal() + theme(legend.position = "none")
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-50-1.png" width="360" /&gt;
]

---
## De puntenwolk met .UA-red[`geom_point()`] en .UA-red[`geom_smooth()`]

.pull-left[

- zonder confidentie interval
- lineair model

.footnotesize[


```r
ggplot(penguins,
       aes(
         x = body_mass_g,
         y = flipper_length_mm
       )) +
  geom_point( ) +
  geom_smooth(
    method = "lm",
    se = FALSE
  ) +
  labs(
    title = "Palmer penguins",
    subtitle = "Samenhang tussen flipper lengte en body mass",
    y = "Flipper lengte",
    x = "Body mass",
  ) + theme_minimal() + theme(legend.position = "none")
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-52-1.png" width="360" /&gt;
]

---
## De puntenwolk met .UA-red[`geom_point()`] en .UA-red[`geom_smooth()`]

.pull-left[

- een facet per soort dankzij .UA-red[`facet_wrap()`]

.footnotesize[


```r
ggplot(penguins,
       aes(
         x = body_mass_g,
         y = flipper_length_mm
       )) +
  geom_point( ) +
  geom_smooth(
    method = "lm",
    se = FALSE
  ) +
  facet_wrap(.~species) +
  labs(
    title = "Palmer penguins",
    subtitle = "Samenhang tussen flipper lengte en body mass",
    y = "Flipper lengte",
    x = "Body mass",
  ) + theme_minimal() + theme(legend.position = "none")
```
]
]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-54-1.png" width="360" /&gt;
]
---
## De puntenwolk met .UA-red[`geom_point()`] en .UA-red[`geom_smooth()`]


.pull-left[

.footnotesize[

```r
ggplot(data = penguins,
       aes(x = flipper_length_mm,
           y = body_mass_g)) +
  geom_point(aes(color = species,
                 shape = species),
             size = 3,
             alpha = 0.8) +
  geom_smooth(
    aes(color = species),
    se = F, method = "lm"
    ) +
  theme_minimal() +
  scale_color_manual(
    values = c("darkorange","purple","cyan4")) +
  labs(title = "Penguin size, Palmer Station LTER",
       subtitle = "Flipper lengte en body mass voor Adelie, Chinstrap en Gentoo Pinguïns",
       x = "Flipper lengte (mm)",
       y = "Body mass (g)",
       color = "Penguin soort",
       shape = "Penguin soort") +
  theme(legend.position = c(0.2, 0.7),
        legend.background = element_rect(fill = "white", color = NA),
        plot.title.position = "plot",
        plot.caption = element_text(hjust = 0, face= "italic"),
        plot.caption.position = "plot")
```
]
]

.pull-right[

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-56-1.png" width="360" /&gt;

]

---
class: inverse-blue

# &lt;i class="fas fa-laptop-code" style="color: #FF0035;"&gt;&lt;/i&gt; Oefeningen `[ggplot2]` : deel 3

.left-column[
![](https://media.giphy.com/media/A9grgCQ0Dm012/giphy.gif)
]
.right-column[
-- Op Dropbox vind je een document .SW-greenD[ `Oefening_ggplot2.Rmd`]

- Plaats dit document op je pc 

- Open vervolgens het bestand in `R Studio`

- Het document bevat een set van opdrachten met telkens lege code blokken

- Bedoeling is dat je de juiste code schrijft (en test door te laten lopen) om deze opdrachten uit te voeren

- Zit je vast? No Worries! 
  - Ik ben er
  - Je hebt elkaar 
  - Er is een oplossingssleutel .SW-greenD[`Oefening_ggplot2_oplossing.Rmd`] 
]

---
class: inverse-green, center, middle
name: appendix1

# Appendix 1 

*Regenwolken laten groeien*

&lt;br&gt; &lt;br&gt;&lt;br&gt;

[Terug naar slideshow...](#raincloud)

---

## Stap 1
.pull-left[

.footnotesize[

```r
library(ggdist)

P1 &lt;- 
  ggplot(penguins, aes(x = species, y = flipper_length_mm)) + 
  stat_halfeye(
  ) 

P1
```
]

]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-58-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Stap 2
.pull-left[

.footnotesize[

```r
P1 &lt;- 
  ggplot(penguins, aes(x = species, y = flipper_length_mm)) + 
  stat_halfeye(
    adjust = .5, 
    width = .6, 
    .width = 0, 
    justification = -.2, 
    point_colour = NA
  ) 

P1
```
]

]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-60-1.png" width="504" style="display: block; margin: auto;" /&gt;
]


---

## Stap 3

.pull-left[

.footnotesize[

```r
P2 &lt;- P1 + 
  geom_boxplot(
    width = .15, 
    outlier.shape = NA
  ) 

P2
```
]

]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-62-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Stap 4

.pull-left[

.footnotesize[

```r
P3 &lt;- P2 + 
  geom_point(
    size = 1.3,
    alpha = .3,
    position = position_jitter(
      seed = 1, width = .1
  )) 

P3
```
]

]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-64-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Stap 5

.pull-left[

.footnotesize[

```r
P4 &lt;- P3 + 
  labs(
    title = "Palmer penguins",
    subtitle = "Verdeling van flipper lengte per soort",
    x = "",
    y = "flipper lengte"
  ) 

P4
```
]

]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-66-1.png" width="504" style="display: block; margin: auto;" /&gt;
]

---

## Stap 6

.pull-left[

.footnotesize[

```r
P5 &lt;- P4 +
  coord_cartesian(xlim = c(1.2, NA), clip = "off") +
  coord_flip() +
  theme_minimal() +
  theme(plot.title.position = "plot")

P5
```
]

]

.pull-right[
&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-68-1.png" width="504" style="display: block; margin: auto;" /&gt;
]
---
class: inverse-green, center, middle

## AANSCHOUW DE REGENWOLKEN / [Terug naar slideshow...](#raincloud)

&lt;img src="Slides_Deel4_files/figure-html/unnamed-chunk-69-1.png" width="504" style="display: block; margin: auto;" /&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
